<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.geometry.Pos?>

<VBox maxHeight="Infinity" maxWidth="Infinity" prefHeight="700.0" prefWidth="1000.0" spacing="20.0" xmlns="http://javafx.com/fxml/1" xmlns:fx="http://javafx.com/fxml/controller" fx:controller="Controller.QuanLyVeController">
    <padding>
        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
    </padding>
    <children>
        <!-- Title -->
        <Label text="Danh Sách Vé Tàu" alignment="CENTER" maxWidth="Infinity">
            <font>
                <Font name="System Bold" size="24.0" />
            </font>
        </Label>

        <!-- Top Section Container (HBox for horizontal centering) -->
        <HBox alignment="CENTER">
            <GridPane hgap="20.0" vgap="10.0">
                <columnConstraints>
                    <!-- Labels (left) -->
                    <ColumnConstraints hgrow="NEVER" maxWidth="120.0" minWidth="10.0" prefWidth="120.0" />
                    <!-- Fields (left) -->
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="180.0" />
                    <!-- Labels (middle) -->
                    <ColumnConstraints hgrow="NEVER" maxWidth="120.0" minWidth="10.0" prefWidth="120.0" />
                    <!-- Fields (middle) -->
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="180.0" />
                    <!-- Gap/Spacing -->
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="50.0" />
                    <!-- Search & Buttons (right) -->
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="250.0" />
                </columnConstraints>
                <rowConstraints>
                    <RowConstraints vgrow="SOMETIMES" /> <!-- Row 0 (Search, Top Buttons) -->
                    <RowConstraints vgrow="SOMETIMES" /> <!-- Row 1 (Section Title) -->
                    <RowConstraints vgrow="SOMETIMES" /> <!-- Row 2 (Mã vé / CCCD) -->
                    <RowConstraints vgrow="SOMETIMES" /> <!-- Row 3 (Mã KH / SĐT) -->
                    <RowConstraints vgrow="SOMETIMES" /> <!-- Row 4 (Họ tên / Email) -->
                    <RowConstraints vgrow="SOMETIMES" /> <!-- Row 5 (Giới tính) -->
                    <!-- Cập nhật button is next to Giới tính row in image -->
                </rowConstraints>
                <children>
                    <!-- Search and Top Buttons -->
                    <HBox alignment="CENTER_RIGHT" spacing="10.0" GridPane.columnIndex="5" GridPane.rowIndex="0">
                        <children>
                            <Button fx:id="btnTimKiem" mnemonicParsing="false" text="Tìm kiếm" />
                            <TextField fx:id="txtTimKiem" prefWidth="150.0" promptText="Theo mã vé tàu hoặc tên khách hàng" />
                        </children>
                    </HBox>
                    <HBox alignment="CENTER_RIGHT" spacing="10.0" GridPane.columnIndex="5" GridPane.rowIndex="1">
                        <children>
                            <Button fx:id="btnChiTiet" mnemonicParsing="false" text="Chi tiết" />
                            <Button fx:id="btnInVe" mnemonicParsing="false" text="In Vé" />
                            <Button fx:id="btnHuyVe" mnemonicParsing="false" style="-fx-background-color: red; -fx-text-fill: white;" text="Hủy vé" />
                        </children>
                    </HBox>

                    <!-- Section Title "Thông tin khách hàng" -->
                    <Label text="Thông tin khách hàng" GridPane.columnIndex="0" GridPane.columnSpan="4" GridPane.rowIndex="1">
                        <font>
                            <Font name="System Bold" size="15.0" />
                        </font>
                    </Label>

                    <!-- Customer/Ticket Info Fields (Display only based on image) -->
                    <Label text="Mã vé:" GridPane.rowIndex="2" />
                    <TextField fx:id="txtMaVe" editable="false" styleClass="readonly-field" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                    <Label text="CCCD:" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                    <TextField fx:id="txtCccd" editable="false" styleClass="readonly-field" GridPane.columnIndex="3" GridPane.rowIndex="2" />

                    <Label text="Mã khách hàng:" GridPane.rowIndex="3" />
                    <TextField fx:id="txtMaKhachHang" editable="false" styleClass="readonly-field" GridPane.columnIndex="1" GridPane.rowIndex="3" />

                    <Label text="Số điện thoại:" GridPane.columnIndex="2" GridPane.rowIndex="3" />
                    <TextField fx:id="txtSoDienThoai" editable="false" styleClass="readonly-field" GridPane.columnIndex="3" GridPane.rowIndex="3" />

                    <Label text="Họ và tên:" GridPane.rowIndex="4" />
                    <TextField fx:id="txtHoVaTen" editable="false" styleClass="readonly-field" GridPane.columnIndex="1" GridPane.rowIndex="4" />

                    <Label text="Email:" GridPane.columnIndex="2" GridPane.rowIndex="4" />
                    <TextField fx:id="txtEmail" editable="false" styleClass="readonly-field" GridPane.columnIndex="3" GridPane.rowIndex="4" />

                    <Label text="Giới tính:" GridPane.columnIndex="2" GridPane.rowIndex="5" />
                    <!-- Using ComboBox<String> to match image dropdown -->
                    <ComboBox fx:id="cbGioiTinh" editable="false" prefWidth="180.0" styleClass="readonly-field" GridPane.columnIndex="3" GridPane.rowIndex="5" />

                    <!-- Cập nhật button -->
                    <Button fx:id="btnCapNhat" mnemonicParsing="false" text="Cập nhật" GridPane.columnIndex="5" GridPane.rowIndex="5" />

                </children>
                <padding>
                    <Insets top="10.0" />
                </padding>
            </GridPane>
        </HBox>


        <!-- Table View -->
        <!-- TableView type is Ve -->
        <TableView fx:id="ticketTable" VBox.vgrow="ALWAYS">
            <columns>
                <!-- TableColumn types match the data type or the String representation -->
                <TableColumn fx:id="colStt" text="STT" prefWidth="50.0" />
                <TableColumn fx:id="colMaVe" text="Mã vé" prefWidth="100.0" />
                <TableColumn fx:id="colDiemDi" text="Điểm đi" prefWidth="120.0" /> <!-- Placeholder/Derived -->
                <TableColumn fx:id="colDiemDen" text="Điểm đến" prefWidth="120.0" /> <!-- Placeholder/Derived -->
                <TableColumn fx:id="colDoiTuong" text="Đối tượng" prefWidth="100.0" /> <!-- Maps to loaiVe -->
                <TableColumn fx:id="colGiaVe" text="Giá vé" prefWidth="100.0" />
                <TableColumn fx:id="colNgayDat" text="Ngày đặt" prefWidth="120.0" /> <!-- Needs formatting -->
                <TableColumn fx:id="colNgayKhoiHanh" text="Ngày khởi hành" prefWidth="120.0" /> <!-- Placeholder/Derived, needs formatting -->
                <!-- Add more columns if needed from Ve or related models -->
                <!-- Example: TrangThaiVe, MaHoaDon etc. -->
                <!-- <TableColumn fx:id="colTrangThaiVe" text="Trạng thái" prefWidth="100.0" /> -->
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>
        </TableView>
    </children>
</VBox>